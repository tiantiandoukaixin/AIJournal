1# Expo 网页界面构建 APK 详细指南

## 概述
当命令行构建遇到网络问题时，使用 Expo 网页界面是更稳定的替代方案。网页界面提供了可视化的构建管理和更好的错误诊断功能。

## 步骤一：访问 Expo 开发者控制台

### 1. 打开浏览器访问
```
https://expo.dev/
```

### 2. 登录账户
- 点击右上角 "Sign in" 按钮
- 使用您的账户信息登录：
  - 邮箱：yutianyuan（您已注册的邮箱）
  - 密码：您设置的密码

## 步骤二：进入项目管理页面

### 1. 访问项目列表
登录后，您会看到账户下的所有项目。找到 "AIJournal" 项目。

### 2. 直接访问项目页面
也可以直接访问项目链接：
```
https://expo.dev/accounts/yutianyuan/projects/aijournal
```

## 步骤三：启动构建

### 1. 进入构建页面
- 在项目页面中，点击左侧导航栏的 "Builds" 选项
- 或者点击 "Build" 按钮

### 2. 创建新构建
- 点击 "Create a build" 或 "New Build" 按钮
- 选择平台：**Android**
- 选择构建配置文件：**preview**（推荐）或 **production**

### 3. 配置构建选项
- **Platform**: Android
- **Profile**: preview
- **Git branch**: main（或您当前的分支）
- **Build type**: APK

### 4. 启动构建
- 检查配置无误后，点击 "Start Build" 按钮
- 系统会自动开始构建过程

## 步骤四：监控构建进度

### 1. 实时监控
- 构建启动后，您会看到实时的构建日志
- 可以查看详细的构建步骤和进度

### 2. 构建阶段
典型的构建过程包括：
1. **Queue**: 等待构建资源
2. **Setup**: 环境准备
3. **Install dependencies**: 安装依赖
4. **Build**: 编译应用
5. **Upload**: 上传构建产物

### 3. 预计时间
- 通常需要 5-15 分钟
- 首次构建可能需要更长时间

## 步骤五：下载 APK

### 1. 构建完成通知
- 构建完成后，页面会显示 "Build completed" 状态
- 您会收到邮件通知（如果启用了邮件通知）

### 2. 下载文件
- 在构建详情页面，点击 "Download" 按钮
- 选择 "Download APK" 下载安装包
- 文件名通常类似：`AIJournal-xxx.apk`

## 步骤六：安装和测试

### 1. 传输到手机
- 通过 USB 数据线传输到 Android 手机
- 或者通过云存储（如百度网盘、微信）传输

### 2. 安装 APK
- 在手机上找到 APK 文件
- 点击安装（可能需要允许"未知来源"应用安装）
- 按照提示完成安装

### 3. 运行测试
- 安装完成后，在手机上找到 "AIJournal" 应用图标
- 点击启动，测试应用功能

## 网页界面的优势

### 1. 更好的可视化
- 清晰的构建状态显示
- 详细的日志查看
- 构建历史记录

### 2. 更稳定的网络
- Expo 服务器直接处理构建
- 减少本地网络问题影响
- 自动重试机制

### 3. 便捷的管理
- 可以同时管理多个构建
- 方便的下载和分享
- 构建缓存优化

## 网络连接问题解决

### 当前问题诊断
经过测试发现，项目在上传到Google Cloud Storage时遇到`ECONNRESET`网络连接重置错误。这是导致网页界面无法构建的根本原因。

### 解决方案

#### 方案1：网络环境优化（推荐）
1. **使用VPN**：
   - 连接稳定的VPN服务
   - 选择美国或新加坡节点
   - 确保VPN支持Google服务

2. **更换网络环境**：
   - 尝试使用手机热点
   - 更换到其他网络环境
   - 避开网络高峰期（建议凌晨或上午时段）

#### 方案2：Git仓库配置（必需）
网页构建需要代码托管在Git仓库中：

1. **创建GitHub仓库**：
   ```bash
   # 在GitHub上创建新仓库 AIJournal
   git remote add origin https://github.com/你的用户名/AIJournal.git
   git branch -M main
   git push -u origin main
   ```

2. **连接EAS项目**：
   - 在Expo控制台中关联GitHub仓库
   - 确保项目ID匹配

#### 方案3：分时段重试
1. **最佳构建时间**：
   - 北京时间：凌晨2-6点
   - 北京时间：上午9-11点
   - 避开晚上7-11点高峰期

2. **重试策略**：
   - 每次失败后等待30分钟再重试
   - 最多重试3次
   - 如果连续失败，更换网络环境

## 备用测试方案

### 使用Expo Go快速测试
1. **手机安装Expo Go**：
   - Android：Google Play Store搜索"Expo Go"
   - iOS：App Store搜索"Expo Go"

2. **启动开发服务器**：
   ```bash
   npx expo start
   ```

3. **扫码测试**：
   - 使用Expo Go扫描终端显示的二维码
   - 直接在手机上测试应用功能

### 本地构建方案
如果网络问题持续，可以配置本地Android构建环境：

1. **安装Android Studio**
2. **配置SDK和模拟器**
3. **使用命令**：
   ```bash
   npx expo run:android
   ```

## 当前项目状态

✅ **已完成配置**：
- EAS账户登录正常
- 项目配置文件完整（app.json, eas.json）
- Git仓库初始化并提交代码
- Android包名和构建配置正确

❌ **待解决问题**：
- 网络连接到Google Cloud Storage不稳定
- 需要配置远程Git仓库（GitHub）

## 推荐执行顺序

1. **立即可行**：使用Expo Go进行功能测试
2. **短期解决**：配置VPN + 创建GitHub仓库
3. **长期方案**：建立稳定的构建流程和网络环境

## 总结

网页界面构建是解决命令行网络问题的最佳方案。它提供了更稳定的构建环境和更好的用户体验。按照以上步骤，您应该能够成功构建并下载 AIJournal 应用的 APK 文件。